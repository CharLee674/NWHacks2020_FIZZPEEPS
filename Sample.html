<!DOCTYPE html >
<html>
<head>
    <meta charset="UTF-8">
    <title>Natural Language</title>
    <script src="https://apis.google.com/js/api.js"></script>

    <script type="text/javascript">
        function doSomething() {
            $('#data').html('');
            $('#data2').html('');
            const textareaValue = $('textarea#textYouWant').val();

            // 
            fetch("/post", {
              method: 'POST',
              headers: {
                // What kind of data
                'Accept': 'application/json',
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                text: textareaValue
              })
            }).then(function(data){
              //
              Console.log("Working");
            }).catch(function(error){
              Console.error();
            });
            
            
            /*gapi.client.init({
              'apiKey': 'AIzaSyAW_lwXLI2bNV_sAz-VT9I46f4qMTFMVG8',
              'discoveryDocs': ['https://language.googleapis.com/$discovery/rest?version=v1']
            }).then(function() {
              return gapi.client.language.documents.analyzeSentiment({
                  'document': {
                      'type': 'PLAIN_TEXT',
                      'content': textareaValue,
                   }
              });
            }).then(function(resp) {
              // send to dataLayer here
              console.log(resp.result);
              $('#data').append(resp.result.documentSentiment.magnitude);
              $('#data2').append(resp.result.documentSentiment.score);
            }, function(reason) {
              console.log('Error: ' + JSON.stringify(reason));
            });
        }

        /*function start() {
            gapi.client.init({
              'apiKey': 'AIzaSyAW_lwXLI2bNV_sAz-VT9I46f4qMTFMVG8',
              'discoveryDocs': ['https://language.googleapis.com/$discovery/rest?version=v1']
            }).then(function() {
              return gapi.client.language.documents.analyzeSentiment({
                  'document': {
                      'type': 'PLAIN_TEXT',
                      'content': 'I love you!'
                   }
              });
            }).then(function(resp) {
              // send to dataLayer here
              console.log(resp.result);
              $('#data').append(resp.result.documentSentiment.magnitude);
              $('#data2').append(resp.result.documentSentiment.score);
            }, function(reason) {
              console.log('Error: ' + reason);
            });
          };*/
          /*gapi.load('client', doSomething);*/
    </script>

</head>

<body>
        <textarea name="textYouWant" id="textYouWant" rows="8" cols="80"></textarea>
        <button id="click" onclick="doSomething()">click me</button>
        <p>magnitude</p>
        <div id="data">
        </div>
        <p>score</p>
        <div id="data2">
        </div>

        <script src="https://code.jquery.com/jquery-3.4.1.min.js">

        </script>
</body>

</html>